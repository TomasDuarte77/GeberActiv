{"ast":null,"code":"import{useState}from'react';import'../legic/index.css';import Notification from'../notification/index.js';import{Logo}from'../logo/index.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Legic(_ref){let{excelData,legicDB,setLegicDB}=_ref;const[inputLegic,setInputLegic]=useState('');const[legicCount,setLegicCount]=useState(()=>{return parseInt(localStorage.getItem('legicCount'))||0;});const[notification,setNotification]=useState({message:'',type:'',show:false});const[isModalOpen,setIsModalOpen]=useState(false);function showNotification(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({message,type,show:true});setTimeout(()=>{setNotification(prev=>({...prev,show:false}));},3000);}function handleLegicInput(legic){if(!excelData){showNotification('Importe um ficheiro primeiro!','error');setInputLegic('');return;}let legicArray=legic.split('');legicArray.shift();const legicCode=legicArray.join('');let userData=excelData[legicCode];if(!userData){showNotification('Este Legic não existe!','error');setInputLegic('');return;}let doubleVerify=legicDB.some(data=>data[2]===legicCode);if(doubleVerify){showNotification('Este Legic já foi registado!','warning');setInputLegic('');return;}const legicDBCopy=[...legicDB,userData];setLegicDB(legicDBCopy);localStorage.setItem('gactiveLegicReadData',JSON.stringify(legicDBCopy));let newLegicCount=legicCount+1;setLegicCount(newLegicCount);localStorage.setItem('legicCount',newLegicCount);let getJsonArray=localStorage.getItem('gactiveImportedData');let jsonConvert=JSON.parse(getJsonArray)||{};let formatJson=Object.values(jsonConvert).reduce((acc,current)=>{return{...acc,[current[2]]:current};},{});let getUserToStatus=formatJson[legicCode];if(getUserToStatus){getUserToStatus.push('check_circle');}localStorage.setItem('gactiveImportedData',JSON.stringify(jsonConvert));setInputLegic('');const personName=userData[1];showNotification(\"Legic de \".concat(personName,\" inserido com sucesso!\"),'success');}function handleInputChange(e){const value=e.target.value;setInputLegic(value);if(value.length===6){handleLegicInput(value);}}const openModal=()=>setIsModalOpen(true);const closeModal=()=>setIsModalOpen(false);return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[notification.show&&/*#__PURE__*/_jsx(Notification,{type:notification.type,message:notification.message,onClose:()=>setNotification({message:'',type:'',show:false})}),/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(Logo,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"legic-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Introduza o seu N\\xFAmero de Legic\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total de Legics registados: \",/*#__PURE__*/_jsx(\"strong\",{children:legicCount})]}),/*#__PURE__*/_jsx(\"input\",{className:\"legic-input\",type:\"number\",placeholder:\"Legic\",onChange:handleInputChange,value:inputLegic})]}),/*#__PURE__*/_jsx(\"i\",{onClick:openModal,className:\"fa fa-question-circle open-modal-icon\"}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ajuda Legic\"}),/*#__PURE__*/_jsx(\"p\",{children:\"-Aqui podes inserir manualmente o seu n\\xFAmero de Legic com 6 d\\xEDgitos!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Lembra-te, o Legic s\\xF3 \\xE9 v\\xE1lido quando tiveres importado um ficheiro Excel com esse c\\xF3digo de Legic!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"close-modal-button\",children:\"Fechar\"})]})})]});}export default Legic;","map":{"version":3,"names":["useState","Notification","Logo","jsx","_jsx","jsxs","_jsxs","Legic","_ref","excelData","legicDB","setLegicDB","inputLegic","setInputLegic","legicCount","setLegicCount","parseInt","localStorage","getItem","notification","setNotification","message","type","show","isModalOpen","setIsModalOpen","showNotification","arguments","length","undefined","setTimeout","prev","handleLegicInput","legic","legicArray","split","shift","legicCode","join","userData","doubleVerify","some","data","legicDBCopy","setItem","JSON","stringify","newLegicCount","getJsonArray","jsonConvert","parse","formatJson","Object","values","reduce","acc","current","getUserToStatus","push","personName","concat","handleInputChange","e","value","target","openModal","closeModal","className","children","onClose","placeholder","onChange","onClick"],"sources":["C:/Users/DuaTo/GeberActiv/src/components/legic/index.js"],"sourcesContent":["import { useState } from 'react';\r\nimport '../legic/index.css';\r\nimport Notification from '../notification/index.js';\r\nimport { Logo } from '../logo/index.js';\r\n\r\nfunction Legic({ excelData, legicDB, setLegicDB }) {\r\n  const [inputLegic, setInputLegic] = useState('');\r\n  const [legicCount, setLegicCount] = useState(() => {\r\n    return parseInt(localStorage.getItem('legicCount')) || 0;\r\n  });\r\n  const [notification, setNotification] = useState({ message: '', type: '', show: false });\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  function showNotification(message, type = 'success') {\r\n    setNotification({ message, type, show: true });\r\n\r\n    setTimeout(() => {\r\n      setNotification(prev => ({ ...prev, show: false }));\r\n    }, 3000);\r\n  }\r\n\r\n  function handleLegicInput(legic) {\r\n    if (!excelData) {\r\n      showNotification('Importe um ficheiro primeiro!', 'error');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n\r\n    let legicArray = legic.split('');\r\n    legicArray.shift(); \r\n    const legicCode = legicArray.join('');\r\n    let userData = excelData[legicCode];\r\n\r\n    if (!userData) {\r\n      showNotification('Este Legic não existe!', 'error');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n\r\n    let doubleVerify = legicDB.some(data => data[2] === legicCode);\r\n    if (doubleVerify) {\r\n      showNotification('Este Legic já foi registado!', 'warning');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n\r\n    const legicDBCopy = [...legicDB, userData];\r\n    setLegicDB(legicDBCopy);\r\n    localStorage.setItem('gactiveLegicReadData', JSON.stringify(legicDBCopy));\r\n\r\n    let newLegicCount = legicCount + 1;\r\n    setLegicCount(newLegicCount);\r\n    localStorage.setItem('legicCount', newLegicCount);\r\n\r\n    let getJsonArray = localStorage.getItem('gactiveImportedData');\r\n    let jsonConvert = JSON.parse(getJsonArray) || {};\r\n    let formatJson = Object.values(jsonConvert).reduce((acc, current) => {\r\n      return { ...acc, [current[2]]: current };\r\n    }, {});\r\n\r\n    let getUserToStatus = formatJson[legicCode];\r\n    if (getUserToStatus) {\r\n      getUserToStatus.push('check_circle');\r\n    }\r\n\r\n    localStorage.setItem('gactiveImportedData', JSON.stringify(jsonConvert));\r\n    setInputLegic('');\r\n\r\n \r\n    const personName = userData[1];\r\n\r\n\r\n    showNotification(`Legic de ${personName} inserido com sucesso!`, 'success');\r\n  }\r\n\r\n  function handleInputChange(e) {\r\n    const value = e.target.value;\r\n    setInputLegic(value);\r\n\r\n    if (value.length === 6) {\r\n      handleLegicInput(value);\r\n    }\r\n  }\r\n\r\n  const openModal = () => setIsModalOpen(true);\r\n  const closeModal = () => setIsModalOpen(false);\r\n\r\n  return (\r\n    <div className='main-container'>\r\n      {notification.show && (\r\n        <Notification\r\n          type={notification.type}\r\n          message={notification.message}\r\n          onClose={() => setNotification({ message: '', type: '', show: false })}\r\n        />\r\n      )}\r\n\r\n      <div className=\"logo\">\r\n        <Logo />\r\n      </div>\r\n\r\n      <div className=\"legic-container\">\r\n        <p>Introduza o seu Número de Legic</p>\r\n        <p>Total de Legics registados: <strong>{legicCount}</strong></p>\r\n        <input \r\n          className='legic-input' \r\n          type='number' \r\n          placeholder='Legic' \r\n          onChange={handleInputChange} \r\n          value={inputLegic}\r\n        />\r\n      </div>\r\n\r\n      <i onClick={openModal} className=\"fa fa-question-circle open-modal-icon\" />\r\n\r\n      {isModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <h2>Ajuda Legic</h2>\r\n            <p>-Aqui podes inserir manualmente o seu número de Legic com 6 dígitos!</p>\r\n            <p>Lembra-te, o Legic só é válido quando tiveres importado um ficheiro Excel com esse código de Legic!</p>\r\n            <button onClick={closeModal} className=\"close-modal-button\">\r\n              Fechar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Legic;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}