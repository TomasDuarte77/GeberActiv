{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DuaTo\\\\Downloads\\\\Geberactiv-main1\\\\src\\\\components\\\\legic\\\\index.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport '../legic/index.css';\nimport Notification from '../notification/index.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Legic({\n  excelData,\n  legicDB,\n  setLegicDB\n}) {\n  _s();\n  const [inputLegic, setInputLegic] = useState('');\n  const [legicCount, setLegicCount] = useState(() => {\n    return parseInt(localStorage.getItem('legicCount')) || 0;\n  });\n  const [notification, setNotification] = useState({\n    message: '',\n    type: '',\n    show: false\n  });\n  function showNotification(message, type = 'success') {\n    setNotification({\n      message,\n      type,\n      show: true\n    });\n    setTimeout(() => {\n      setNotification(prev => ({\n        ...prev,\n        show: false\n      }));\n    }, 3000);\n  }\n  function handleLegicInput(legic) {\n    if (!excelData) {\n      showNotification('Importe um ficheiro primeiro!', 'error');\n      setInputLegic('');\n      return;\n    }\n    let legicArray = legic.split('');\n    legicArray.shift();\n    const legicCode = legicArray.join('');\n    let userData = excelData[legicCode];\n    if (!userData) {\n      showNotification('Este Legic não existe!', 'error');\n      setInputLegic('');\n      return;\n    }\n    let doubleVerify = legicDB.some(data => data[2] === legicCode);\n    if (doubleVerify) {\n      showNotification('Este Legic já foi registado!', 'warning');\n      setInputLegic('');\n      return;\n    }\n    const legicDBCopy = [...legicDB, userData];\n    setLegicDB(legicDBCopy);\n    localStorage.setItem('gactiveLegicReadData', JSON.stringify(legicDBCopy));\n    let newLegicCount = legicCount + 1;\n    setLegicCount(newLegicCount);\n    localStorage.setItem('legicCount', newLegicCount);\n    let getJsonArray = localStorage.getItem('gactiveImportedData');\n    let jsonConvert = JSON.parse(getJsonArray) || {};\n    let formatJson = Object.values(jsonConvert).reduce((acc, current) => {\n      return {\n        ...acc,\n        [current[2]]: current\n      };\n    }, {});\n    let getUserToStatus = formatJson[legicCode];\n    if (getUserToStatus) {\n      getUserToStatus.push('check_circle');\n    }\n    localStorage.setItem('gactiveImportedData', JSON.stringify(jsonConvert));\n    setInputLegic('');\n    showNotification('Legic inserido com sucesso!', 'success');\n  }\n  function handleInputChange(e) {\n    const value = e.target.value;\n    setInputLegic(value);\n    if (value.length === 6) {\n      handleLegicInput(value);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [notification.show && /*#__PURE__*/_jsxDEV(Notification, {\n      type: notification.type,\n      message: notification.message,\n      onClose: () => setNotification({\n        message: '',\n        type: '',\n        show: false\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"legiccount\",\n      children: [\"Total de Legics registados: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: legicCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 61\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logo\",\n      children: /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"legic-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Introduza o seu N\\xFAmero de Legic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"legic-input\",\n        type: \"number\",\n        placeholder: \"Legic\",\n        onChange: handleInputChange,\n        value: inputLegic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(Legic, \"fLXDLjryWHk4c/ap8kuPLfTUsSY=\");\n_c = Legic;\nexport default Legic;\nvar _c;\n$RefreshReg$(_c, \"Legic\");","map":{"version":3,"names":["useState","Notification","jsxDEV","_jsxDEV","Legic","excelData","legicDB","setLegicDB","_s","inputLegic","setInputLegic","legicCount","setLegicCount","parseInt","localStorage","getItem","notification","setNotification","message","type","show","showNotification","setTimeout","prev","handleLegicInput","legic","legicArray","split","shift","legicCode","join","userData","doubleVerify","some","data","legicDBCopy","setItem","JSON","stringify","newLegicCount","getJsonArray","jsonConvert","parse","formatJson","Object","values","reduce","acc","current","getUserToStatus","push","handleInputChange","e","value","target","length","children","onClose","fileName","_jsxFileName","lineNumber","columnNumber","className","Logo","placeholder","onChange","_c","$RefreshReg$"],"sources":["C:/Users/DuaTo/Downloads/Geberactiv-main1/src/components/legic/index.js"],"sourcesContent":["import { useState } from 'react';\r\nimport '../legic/index.css';\r\nimport Notification from '../notification/index.js';\r\n\r\nfunction Legic({ excelData, legicDB, setLegicDB }) {\r\n  const [inputLegic, setInputLegic] = useState('');\r\n  const [legicCount, setLegicCount] = useState(() => {\r\n    return parseInt(localStorage.getItem('legicCount')) || 0;\r\n  });\r\n  const [notification, setNotification] = useState({ message: '', type: '', show: false });\r\n\r\n  function showNotification(message, type = 'success') {\r\n    setNotification({ message, type, show: true });\r\n\r\n    setTimeout(() => {\r\n      setNotification(prev => ({ ...prev, show: false }));\r\n    }, 3000);\r\n  }\r\n\r\n  function handleLegicInput(legic) {\r\n    if (!excelData) {\r\n      showNotification('Importe um ficheiro primeiro!', 'error');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n\r\n    let legicArray = legic.split('');\r\n    legicArray.shift();\r\n    const legicCode = legicArray.join('');\r\n    let userData = excelData[legicCode];\r\n\r\n    if (!userData) {\r\n      showNotification('Este Legic não existe!', 'error');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n\r\n    let doubleVerify = legicDB.some(data => data[2] === legicCode);\r\n    if (doubleVerify) {\r\n      showNotification('Este Legic já foi registado!', 'warning');\r\n      setInputLegic('');\r\n      return;\r\n    }\r\n    const legicDBCopy = [...legicDB, userData];\r\n    setLegicDB(legicDBCopy);\r\n    localStorage.setItem('gactiveLegicReadData', JSON.stringify(legicDBCopy));\r\n\r\n    let newLegicCount = legicCount + 1;\r\n    setLegicCount(newLegicCount);\r\n    localStorage.setItem('legicCount', newLegicCount);\r\n\r\n    let getJsonArray = localStorage.getItem('gactiveImportedData');\r\n    let jsonConvert = JSON.parse(getJsonArray) || {};\r\n    let formatJson = Object.values(jsonConvert).reduce((acc, current) => {\r\n      return { ...acc, [current[2]]: current };\r\n    }, {});\r\n\r\n    let getUserToStatus = formatJson[legicCode];\r\n    if (getUserToStatus) {\r\n      getUserToStatus.push('check_circle');\r\n    }\r\n\r\n    localStorage.setItem('gactiveImportedData', JSON.stringify(jsonConvert));\r\n    setInputLegic('');\r\n    \r\n    showNotification('Legic inserido com sucesso!', 'success');\r\n  }\r\n\r\n  function handleInputChange(e) {\r\n    const value = e.target.value;\r\n    setInputLegic(value);\r\n\r\n    if (value.length === 6) {\r\n      handleLegicInput(value);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {notification.show && (\r\n        <Notification\r\n          type={notification.type}\r\n          message={notification.message}\r\n          onClose={() => setNotification({ message: '', type: '', show: false })}\r\n        />\r\n      )}\r\n\r\n      <p className='legiccount'>Total de Legics registados: <strong>{legicCount}</strong></p>\r\n\r\n      <div className=\"logo\">\r\n              <Logo />\r\n            </div>\r\n      <div className='legic-container'>\r\n        <p>Introduza o seu Número de Legic</p>\r\n        <input \r\n          className='legic-input' \r\n          type='number' \r\n          placeholder='Legic' \r\n          onChange={handleInputChange} \r\n          value={inputLegic}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Legic;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}